!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var s=class{constructor(e){this.class=e.classList[0],this.id=e.id,this.parent=null,this.children=[],this.element=e,this.isActive=!1}initialize(){}onActivate(){}onDeactivate(){}setIsActive(e){this.isActive=e,this.isActive?(this.element.classList.add("active"),this.onActivate()):(this.element.classList.remove("active"),this.onDeactivate())}switch(){this.isActive?this.setIsActive(!1):this.setIsActive(!0)}static initializeAll(){}};var n=class extends s{constructor(e){super(e)}onActivate(){setTimeout(()=>{this.setIsActive(!1)},2e3)}success(e){this.element.innerHTML=e,this.element.classList.remove("--danger"),this.element.classList.add("--success"),this.setIsActive(!0)}error(e){this.element.innerHTML=e,this.element.classList.remove("--success"),this.element.classList.add("--danger"),this.setIsActive(!0)}initialize(){}static initializeAll(e){}};var o=class extends s{constructor(e){super(e)}initialize(){this.element.onclick=e=>{this.switch(),this.parent&&this.parent.setIsActive(this.isActive)}}static initializeAll(e){}};var l=class extends s{constructor(e){super(e)}initialize(){this.menuItems=this.element.querySelectorAll(".dropdown__menu-item");for(let e of this.menuItems){let t=this.system.uniqueComponents[e.dataset.activate];t&&(e.onclick=e=>{t.activator=this.parent,t.setIsActive(!0)})}}static initializeAll(e){document.addEventListener("click",t=>{for(let i of e.classifiedComponents.dropdown)i.element!=t.target.parentElement&&i.setIsActive(!1);if(t.target.parentElement&&t.target.parentElement.classList.contains("dropdown")){let i=e.components[t.target.parentElement.dataset.index];i&&i.switch()}})}};var a=class extends s{constructor(e){super(e)}initialize(){this.submitButton=this.element.querySelector('[type="submit"]'),this.element.onsubmit=e=>{e.preventDefault(),this.onSubmit()}}serialize(){let e=this.element.querySelectorAll(".form__control"),t={};for(let i of e){let e=i.parentNode.parentNode;"FORM"==e.tagName?t[i.name]=i.value:"FIELDSET"==e.tagName&&(e.name in t||(t[e.name]={}),t[e.name][i.name]=i.value)}return this.children[1]&&(t[this.children[1].dataName]=this.children[1].serialize()),t}deserialize(e){for(let t in e){let i=this.element.querySelector(`[name=${t}]`);i&&(i.value=e[t])}}reset(){let e=this.element.querySelectorAll(".form__control");for(let t of e)"SELECT"!=t.tagName?t.value="":t.value=t.children[0].value}validate(){let e=this.element.querySelectorAll(".form__control"),t=!0;for(let i of e)if(!i.validity.valid){this.element.classList.add("form--validated"),t=!1;break}return t}onSubmit(){}static initializeAll(e){}};var r=class extends s{constructor(e){super(e)}initialize(){this.addModal=this.children[0],this.addForm=this.addModal.children[0],this.removeModal=this.children[1],this.nodeTemplate=this.children[2],this.node=this.children[3],this.alert=this.system.uniqueComponents.alert,this.addModal.onActivate=e=>{document.body.classList.add("overflow-hidden"),this.addModal.activator.element.classList.contains("node--list")?(this.addModal.setTitle("Add"),this.addModal.setConfirmButtonText("Add")):(this.node.deselectAllNodes(),this.addModal.activator.setIsActive(!0),this.addForm.deserialize(this.addModal.activator.properties.data),this.addModal.setTitle("Edit"),this.addModal.setConfirmButtonText("Save"),this.addModal.confirmButton.classList.add("--warning"),this.addModal.confirmButton.classList.remove("--success")),this.addModal.onActivate2()},this.removeModal.onActivate=e=>{this.removeModal.activator.element.classList.contains("node--list")||(this.node.deselectAllNodes(),this.removeModal.activator.setIsActive(!0)),this.removeModal.onActivate2()},this.addModal.onConfirm=e=>{if(!this.addForm.validate())return null;if(this.addModal.activator.element.classList.contains("node--list"))this.addAPI(this.addForm.serialize()).then(e=>{this.node.pushNodeFromTemplate(this.nodeTemplate).setData(e),this.alert.success("Item has been successfully added!")}).catch(e=>{this.alert.error("Failed to add item!")});else{let e=this.addForm.serialize();e.id=this.addModal.activator.properties.data.id,this.editAPI(e).then(e=>{this.alert.success("Item has been successfully saved!"),this.addModal.activator.setData(e)}).catch(e=>{this.alert.error("Failed to save item!")})}this.addModal.onConfirm2(),this.addModal.setIsActive(!1)},this.removeModal.onConfirm=e=>{this.removeAPI(this.node.getSelectedNodeIds()).then(API.handleErrors).then(e=>{this.alert.success("Items have been successfully removed!"),this.node.removeSelectedNodes()}).catch(e=>{this.alert.error("Failed to remove items!")}),this.removeModal.setIsActive(!1)}}load(){this.loadAPI().then(e=>{for(let t of e){this.node.pushNodeFromTemplate(this.nodeTemplate).setData(t)}})}static initializeAll(e){}};var d=class extends s{constructor(e){super(e)}initialize(){this.title=this.element.querySelector(".modal__title"),this.confirmButton=this.element.querySelector(".modal__confirm-button"),this.confirmButton.onclick=e=>{this.onConfirm()}}setConfirmButtonText(e){this.confirmButton.innerHTML=e}onActivate(){document.body.classList.add("overflow-hidden")}onDeactivate(){document.body.classList.remove("overflow-hidden")}onActivate2(){}onConfirm(){}onConfirm2(){}setTitle(e){this.title.innerHTML=e}static initializeAll(e){document.addEventListener("mousedown",t=>{if("deactivate"in t.target.dataset&&"modal"==t.target.dataset.deactivate||t.target.classList.contains("modal"))for(let t of e.classifiedComponents.modal)t.setIsActive(!1)})}};var c=class extends s{constructor(e){super(e)}initialize(){this.toggle=this.element.querySelector(".navigation__toggle"),this.toggle.onclick=e=>{this.switch()}}static initializeAll(e){}};var h=class extends s{constructor(e){super(e)}initialize(){this.title=this.element.querySelector(".node__title"),this.data=this.element.querySelector(".node__data"),this.body=this.element.querySelector(".node__body"),this.properties={title:this.title?this.title.innerHTML:"",nodes:[],isSelected:!1,data:{}},this.dataName=this.element.dataset.dataName;for(let e of this.children)"node"==e.class&&this.properties.nodes.push(e);let e=this.element.querySelector(".delete-button");e&&(e.onclick=e=>{this.parent.properties.nodes.splice(this.parent.properties.nodes.indexOf(this),1),this.system.deleteComponent(this)})}onPush(){}serialize(){let e={};for(let t of this.properties.nodes)e[t.properties.data.id]=!0;return e}dataFromValues(){let e=this.element.querySelectorAll("[data-key]");for(let t of e)this.properties.data[t.dataset.key]=t.innerHTML}setData(e){this.properties.data=e,this.data.innerHTML=e.code}findSelectedNodes(){let e=[];for(let t of this.properties.nodes)t.isActive&&e.push(t);return e}getSelectedNodeIds(){let e=[],t=this.findSelectedNodes();for(let i of t)e.push(i.properties.data.id);return e}deselectAllNodes(){for(let e of this.properties.nodes)e.setIsActive(!1)}onActivate(){this.isSelected=this.isActive,this.children[0]&&"checkbox"==this.children[0].class&&this.children[0].setIsActive(this.isActive)}onDeactivate(){this.isSelected=this.isActive,this.children[0]&&"checkbox"==this.children[0].class&&this.children[0].setIsActive(this.isActive)}setIsSelected(e){this.properties.isSelected=e,this.activate()}setTitle(e){this.properties.title=e,this.title.innerHTML=e}pushNodeFromElement(e){this.body.appendChild(e);let t=this.system.createComponent(e,this);return this.system.findComponents(t.element,t),this.system.initializeComponents(),this.properties.nodes.push(t),this.onPush(),t}pushNodeFromTemplate(e){let t=e.element.content.cloneNode(!0).children[0];this.body.appendChild(t);let i=this.system.createComponent(t,this);return this.system.findComponents(i.element,i),this.system.initializeComponents(),this.properties.nodes.push(i),this.onPush(),i}pushNodeFromComponent(e){return this.body.appendChild(e.element),this.properties.nodes.push(e),this.onPush(),e}removeSelectedNodes(){let e=this.findSelectedNodes();for(let t of e)this.properties.nodes.splice(this.properties.nodes.indexOf(t),1),this.system.deleteComponent(t)}clear(){let e=this.properties.nodes.pop();for(;e;)this.system.deleteComponent(e),e=this.properties.nodes.pop()}static initializeAll(e){}};var m=class extends s{constructor(e){super(e)}initialize(){}static initializeAll(e){}};window.System=class{constructor(){this.componentClasses={alert:n,checkbox:o,dropdown:l,form:a,manager:r,modal:d,navigation:c,node:h,root:s,template:m},this.uninitializedComponents=[],this.components=[],this.classifiedComponents={},this.uniqueComponents={},this.rootElement=document.querySelector(".root"),this.rootComponent=this.createComponent(this.rootElement,null);for(let e in this.componentClasses)this.classifiedComponents[e]=[];this.findComponents(this.rootElement,this.rootComponent),this.initializeComponents(),this.initializeAll(this),console.log(this)}initializeAll(){for(let e in this.componentClasses)this.componentClasses[e].initializeAll(this)}createComponent(e,t){let i=this.componentClasses[e.classList[0]];if(!i)return null;let s=new i(e);return s.system=this,this.uninitializedComponents.push(s),t&&(s.parent=t,t.children.push(s)),s}initializeComponents(){for(let e of this.uninitializedComponents)this.classifiedComponents[e.class].push(e),e.element.dataset.index=this.components.push(e)-1,e.id&&(this.uniqueComponents[e.id]=e);for(let e of this.uninitializedComponents)e.initialize();this.uninitializedComponents=[]}deleteComponent(e){let t=e.children.pop();for(;t;)this.deleteComponent(t),t=e.children.pop();e.parent.children.indexOf(e)>-1&&e.parent.children.splice(e.parent.children.indexOf(e),1),e.element.parentNode.removeChild(e.element),this.components.indexOf(e)>-1&&(this.components[this.components.indexOf(e)]=null),this.uniqueComponents[e.id]&&delete this.uniqueComponents[e.id],this.classifiedComponents[e.class].indexOf(e)>-1&&this.classifiedComponents[e.class].splice(this.classifiedComponents[e.class].indexOf(e),1)}findComponents(e,t){let i=e.children;for(let e of i){let i=t;e.classList[0]in this.componentClasses&&(i=this.createComponent(e,t)),this.findComponents(e,i)}}}}]);